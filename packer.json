{
  "variables": {
    "image_name": "",
    "image_family": "",
    "image_zone": "",
    "project_id": ""
  },

  "builders": [
    {
      "image_name": "{{ user `image_name` }}",
      "type": "googlecompute",
      "project_id": "{{ user `project_id`}}",
      "source_image_family": "ubuntu-1804-lts",
      "image_family": "{{ user `image_family` }}",
      "ssh_username": "packer",
      "zone": "{{ user `image_zone` }}",
      "startup_script_file": "startup-script.sh",
      "scopes": [
        "https://www.googleapis.com/auth/userinfo.email",
        "https://www.googleapis.com/auth/compute",
        "https://www.googleapis.com/auth/devstorage.full_control"
      ]
    }
  ],
  "provisioners": [
    {
      "type":  "shell",
      "script": "provision_docker.sh"
    }
  ],
  "post-processors": [
    {
      "type": "googlecompute-export",
      "paths": [
        "gs://jafudi-prod/jafudi-vm.tar.gz"
      ],
      "keep_input_artifact": true
    }
  ]
}
{
  "variables": {
    "image_name": "",
    "image_family": "",
    "image_zone": "",
    "project_id": ""
  },

  "builders": [
    {
      "image_name": "{{ user `image_name` }}",
      "type": "googlecompute",
      "project_id": "{{ user `project_id`}}",
      "source_image_family": "ubuntu-minimal-1804-lts",
      "image_family": "{{ user `image_family` }}",
      "ssh_username": "packer",
      "zone": "{{ user `image_zone` }}",
      "startup_script_file": "provision_release.sh",
      "state_timeout": "1h5m2s",
      "scopes": [
        "https://www.googleapis.com/auth/userinfo.email",
        "https://www.googleapis.com/auth/compute",
        "https://www.googleapis.com/auth/devstorage.full_control"
      ]
    }
  ],
  "provisioners": [
    {
      "type":  "shell",
      "scripts": [
        "provision_desktop.sh"
      ],
      "expect_disconnect": true,
      "valid_exit_codes": [0, 2300218, 100]
    }
  ]
}
# Desktop cloud-init Terraform module

Terraform module which generates cloud-init userdata for provisioning the desktop.

## Usage

```hcl
module "desktop_installer" {
  timezone_name        = var.timezone
  locale_name          = var.locale
  vm_mutual_keypair    = module.credentials_generator.vm_mutual_key
  gateway_username     = module.credentials_generator.gateway_username
  desktop_username     = module.credentials_generator.desktop_username
  primary_nic_name     = module.credentials_generator.desktop_primary_nic_name
  murmur_config        = module.credentials_generator.murmur_credentials
  gateway_dns_hostname = module.credentials_generator.full_hostname
  email_config         = module.credentials_generator.email_config
  source               = "./modules/terraform-cloudinit-desktop"
}
```

## Structure

![Visualization of resource dependencies](./documentation/terraform-graph.png "Generated by using the blast-radius tool")

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| terraform | >= 0.12.26 |
| template | ~> 2.2.0 |

## Providers

| Name | Version |
|------|---------|
| template | ~> 2.2.0 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| desktop\_username | Username for logging in to Ubuntu on the desktop node | `string` | n/a | yes |
| email\_config | n/a | <pre>object({<br>    address   = string<br>    password  = string<br>    imap_port = number<br>    smtp_port = number<br>  })</pre> | n/a | yes |
| gateway\_dns\_hostname | n/a | `string` | n/a | yes |
| gateway\_username | Username for logging in to Ubuntu on the gateway node | `string` | n/a | yes |
| locale\_name | n/a | `string` | `"de_DE.UTF-8"` | no |
| murmur\_config | n/a | <pre>object({<br>    port     = number<br>    password = string<br>  })</pre> | n/a | yes |
| primary\_nic\_name | n/a | `string` | n/a | yes |
| timezone\_name | The name of the common system time zone applied to both VMs | `string` | `"Europe/Berlin"` | no |
| vm\_mutual\_keypair | n/a | <pre>object({<br>    private_key_pem    = string<br>    public_key_openssh = string<br>  })</pre> | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| unzipped\_config | n/a |

<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->